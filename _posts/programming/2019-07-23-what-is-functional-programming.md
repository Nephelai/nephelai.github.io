---
layout: post
title: What is functional programming
tags: [programming, function]
categories: [programming]
---

모든 함수는 2종류의 입력과 출력을 갖습니다.

1. 일반적인 입출력으로 명확히 입력(parameter)을 명시하고, 출력(return, function type)을 명시합니다.
2. 숨겨진 입력과 출력입니다. parameter가 없거나 void 형식의 출력입니다. 하지만 이 경우에도 함수에 진입하기 전 상태와 함수가 끝나도 상태가 입출력이 됩니다. 무언가를 필요로 하고, 또 변경을 초래하기도 하지만 API만 봐서는 추측할 수 없습니다.

이 숨겨진 입력과 출력은 Side-Effect라는 문제점을 야기합니다. 이를 파악하기 위해서 인수 목록에는 없지만 필요한 것들이 무엇이고, 반환 값에 반영되지 않으면서 하는 일은 무엇인지를 알아야 합니다.

```
public boolean processMessage(Channel channel){...}
```

함수 내부를 보지 않고 함수가 무엇을 필요로 하는지 무슨 일을 하는지 전혀 알 길이 없습니다. Channel에서 Message를 꺼내서 처리하는 것인가? Channel을 어떤 조건에 맞추어 Close 처리하는 하는 것인가? 아니면 다른 DB의 특정 Count를 update하는 것일 수도 있습니다.

Side-Effect는 복잡성 빙산입니다. 보통 함수의 Signature와 이름을 보면 그 함수가 무엇인지를 알 수 있다고 생각합니다. 하지만 함수 Signature의 표면 아래 숨겨진 것은 그 무엇이든 될 수 있습니다. 어떤 요구 사항이든 숨겨져 있을 수 있고, 또 어떤 숨겨진 변경도 발생할 수 있습니다. 그 구현(내부, Concrete)을 보지 않고, 어떤 것들이 연관되어 있을지 전혀 알 수 없습니다. API의 표면 아래에는 잠재적으로 큰 복잡성이 숨어 있습니다. 따라서 함수를 제대로 파악하기 위해서는 가능한 대안이 3가지 있습니다.

1. 함수 정의를 파고 들어 갑니다.
2. 복잡성을 표면 위로 드러냅니다.
3. 그냥 무시하고 잘 되기를 바랍니다.

#### encapsulation

캡슐화는 구현 세부 사항을 숨기는 것에 관한 것입니다. code의 내부를 숨겨서 호출하는 쪽에서 걱정할 필요가 없게 하는 방법입니다. 여기와는 다른 이야기입니다.

### Side Effect가 나쁜 건가?

Side Effect이 원래 작성한 의도대로 정확하게 동작한다면 괜찮을 것입니다. 하지만 대부분은 의도대로 되지 않습니다.

이 함수가 작성될 때 기대했던 것과 똑같이 상태를 set-up 되어있나요? 혹시 어딘가 사소한 것이라고 바뀌지 않았나요? 아마 겉으로 봐서는 전혀 연관 없어 보이는 code 조각을 수정했을지 모릅니다. 아니면 새로운 환경에 software를 설치할 수도 있습니다.

이런 code는 완전히 분리하여 Test를 할 수 없습니다. 우리는 code를 열어보고 숨겨진 원인과 결과를 파악하고, 그럴듯하게 simulation을 해야합니다. 우리들은 구현 세부 사항을 무시할 수 있어야 합니다. 하지만 side effect을 허용한다면...



## 순수함수는 무엇인가?

**모든 입력이 입력으로 선언되고(숨겨진 것이 없이) 마찬가지로 모든 출력이 출력으로 선언된 함수를 '순수(pure)'하다고 부릅니다.**

반대로 숨겨진 입력이나 출력이 있는 경우는 순수하지 않은 것이며, 함수가 제공한다고 보이는 계약(contract)이 사실은 함수의 일부분입니다. 순수하지 않은 코드를 '독립적으로' 사용할 수 없습니다. 즉, 독립적으로 Test할 수 없습니다. Test하거나 Debug가 필요할 때면 그것이 의존하고 있는 것을 항상 신경써야합니다.

## 함수형 프로그래밍이란 무엇인가?

함수형 프로그래밍은 순수 함수를 작성하는 것입니다. 그래서 숨겨진 입력이나 출력을 최대한 제거하여 가능한한 우리의 code의 대부분이 단지 입력과 출력을 관계를 기술하게끔 하는 것을 말합니다.

Side Effect를 완전히 피할 수는 없습니다. **대부분의 program은 return 값을 얻기 위해서가 아니라 어떤 동작을 하기 위해 실행하기 때문입니다.** 하지만 프로그램 내부에서는 엄격하게 통제하고자 합니다. 우리는 가능한 모든 곳에서 Side Effect를 제거하고, 또 제거할 수 없는 경우에는 철저하게 통제할 것입니다.

code 조각이 필요로 하는 것과 유발할게 될 결과를 숨기지 말아야 합니다. code 조각이 제대로 실행하기 위해 뭔가를 필요로 한다면 숨기지 말고 보여주어야 합니다. 또한 무엇인가 일을 한다면 출력 형태로 선언해야 합니다. 이렇게 한다면 우리의 code는 더욱 명확해 질 것입니다. 복잡성이 표면에 드러나고 그것을 분해하여 처리할 수 있을 것 입니다.

## 함수형 프로그래밍 언어는 무엇인가?

모든 언어는 순수함수를 지원합니다. add(x, y)를 순수하지 않게 만들기는 어렵습니다. 또한 많은 경우 순수하지 않은 함수를 순수하게 만들 때 필요한 일은 모든 입력 및 출력을 함수 Signature에 올리는 것 뿐입니다. 그렇다면 과연 모든 언어가 함수형일까요?

당연히 아닙니다. **함수형 프로그래밍 언어는 Side Effect(부작용)가 없는 프로그래밍을 지원하고 장려하는 언어**입니다.

더 구체적으로 말하자면, 함수형 언어는 가능한한 Side Effect를 제거하고 그렇지 않은 곳에는 철저히 제어할 수 있도록 적극적으로 도와주는 언어입니다.

더 극적으로 표현하자면, 함수형 언어는 더 적극적이고 더 격렬하게 Side Effect에 적대적인 언어입니다. Side Effect는 복잡성을 지니고, 복잡성은 Bug이며, Bug는 악마입니다. 함수형 언어는 그 Side Effect에 적대적이 되도록 도와주는 언어입니다.

## 그렇다면 어떤 것이 함수형 프로그래밍 언어인가?

### map이나 reduce가 아닙니다.

모든 함수형 언어에서 이 함수들을 보게 되더라도 이것으로 함수형이 되는 것은 아닙니다. 그저 Sequence 자료를 처리하는 과정에서 Side-Effect를 없애려고 노력하다보면 언제나 얻게되는 함수들일 뿐입니다.

### Lamda 함수가 아닙니다.

역시나 FP언어에는 일급 함수(first-class function)가 있습니다. Lamda 함수 역시 Side-Effect를 회피하기 위해서 언어를 만들다보면 자연스럽게 얻어지는 것입니다. FP를 가능하게 하는 것이지 핵심요소가 아닙니다.



함수형 언어(Functional Program Language, FP)



## 출처

[Medium - (번역) 함수형 프로그래밍이란 무엇인가?](https://medium.com/@jooyunghan/함수형-프로그래밍이란-무엇인가-fab4e960d263)

[Medium - (번역) 어떤 프로그래밍 언어들이 함수형인가?](https://medium.com/@jooyunghan/어떤-프로그래밍-언어들이-함수형인가-fec1e941c47f)